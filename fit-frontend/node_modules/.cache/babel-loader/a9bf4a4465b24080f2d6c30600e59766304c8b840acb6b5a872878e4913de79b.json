{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{Pie}from\"react-chartjs-2\";import{Chart as ChartJS,ArcElement,Tooltip,Legend}from\"chart.js\";// Register chart.js components\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(ArcElement,Tooltip,Legend);function DietPieChart(_ref){let{userId}=_ref;const[dietData,setDietData]=useState([]);useEffect(()=>{if(!userId)return;axios.get(\"http://localhost:8080/api/diets/user/\".concat(userId)).then(res=>setDietData(res.data)).catch(err=>console.error(\"Error fetching diet data:\",err));},[userId]);// Group calories by mealType\nconst grouped=dietData.reduce((acc,item)=>{acc[item.mealType]=(acc[item.mealType]||0)+item.calories;return acc;},{});const chartData={labels:Object.keys(grouped),datasets:[{data:Object.values(grouped),backgroundColor:[\"#FF6384\",\"#36A2EB\",\"#FFCE56\",\"#4BC0C0\",\"#9966FF\",\"#FF9F40\"],borderColor:\"#fff\",borderWidth:2}]};const options={responsive:true,maintainAspectRatio:false,plugins:{legend:{position:\"bottom\",labels:{color:\"#333\",font:{size:14}}},tooltip:{callbacks:{label:function(context){const total=context.dataset.data.reduce((a,b)=>a+b,0);const value=context.raw;const percentage=(value/total*100).toFixed(1);return\"\".concat(context.label,\": \").concat(value,\" kcal (\").concat(percentage,\"%)\");}}}}};return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\",maxWidth:\"400px\",height:\"300px\",margin:\"20px auto\",padding:\"12px\",border:\"1px solid #ddd\",borderRadius:\"8px\",backgroundColor:\"#fafafa\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{textAlign:\"center\",marginBottom:\"12px\"},children:\"Diet Plan Calories\"}),dietData.length?/*#__PURE__*/_jsx(Pie,{data:chartData,options:options}):/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",padding:\"20px\",color:\"#666\"},children:\"No diet data available.\"})]});}export default DietPieChart;","map":{"version":3,"names":["React","useEffect","useState","axios","Pie","Chart","ChartJS","ArcElement","Tooltip","Legend","jsx","_jsx","jsxs","_jsxs","register","DietPieChart","_ref","userId","dietData","setDietData","get","concat","then","res","data","catch","err","console","error","grouped","reduce","acc","item","mealType","calories","chartData","labels","Object","keys","datasets","values","backgroundColor","borderColor","borderWidth","options","responsive","maintainAspectRatio","plugins","legend","position","color","font","size","tooltip","callbacks","label","context","total","dataset","a","b","value","raw","percentage","toFixed","style","width","maxWidth","height","margin","padding","border","borderRadius","children","textAlign","marginBottom","length"],"sources":["C:/Users/Gowtham/OneDrive/Desktop/fit-frontend/fitness-app/src/components/DietPieChart.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Pie } from \"react-chartjs-2\";\r\nimport { Chart as ChartJS, ArcElement, Tooltip, Legend } from \"chart.js\";\r\n\r\n// Register chart.js components\r\nChartJS.register(ArcElement, Tooltip, Legend);\r\n\r\nfunction DietPieChart({ userId }) {\r\n  const [dietData, setDietData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!userId) return;\r\n    axios.get(`http://localhost:8080/api/diets/user/${userId}`)\r\n      .then(res => setDietData(res.data))\r\n      .catch(err => console.error(\"Error fetching diet data:\", err));\r\n  }, [userId]);\r\n\r\n  // Group calories by mealType\r\n  const grouped = dietData.reduce((acc, item) => {\r\n    acc[item.mealType] = (acc[item.mealType] || 0) + item.calories;\r\n    return acc;\r\n  }, {});\r\n\r\n  const chartData = {\r\n    labels: Object.keys(grouped),\r\n    datasets: [\r\n      {\r\n        data: Object.values(grouped),\r\n        backgroundColor: [\r\n          \"#FF6384\", \"#36A2EB\", \"#FFCE56\",\r\n          \"#4BC0C0\", \"#9966FF\", \"#FF9F40\"\r\n        ],\r\n        borderColor: \"#fff\",\r\n        borderWidth: 2,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: \"bottom\",\r\n        labels: { color: \"#333\", font: { size: 14 } }\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: function (context) {\r\n            const total = context.dataset.data.reduce((a, b) => a + b, 0);\r\n            const value = context.raw;\r\n            const percentage = ((value / total) * 100).toFixed(1);\r\n            return `${context.label}: ${value} kcal (${percentage}%)`;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      width: \"100%\", maxWidth: \"400px\", height: \"300px\",\r\n      margin: \"20px auto\", padding: \"12px\",\r\n      border: \"1px solid #ddd\", borderRadius: \"8px\",\r\n      backgroundColor: \"#fafafa\"\r\n    }}>\r\n      <h3 style={{ textAlign: \"center\", marginBottom: \"12px\" }}>Diet Plan Calories</h3>\r\n      {dietData.length ? (\r\n        <Pie data={chartData} options={options} />\r\n      ) : (\r\n        <div style={{ textAlign: \"center\", padding: \"20px\", color: \"#666\" }}>\r\n          No diet data available.\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DietPieChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}