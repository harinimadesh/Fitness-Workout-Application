{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TrainerProgress(_ref){let{auth}=_ref;const[photos,setPhotos]=useState([]);const[clients,setClients]=useState([]);useEffect(()=>{if(!(auth!==null&&auth!==void 0&&auth.id))return;// ✅ Load mapped clients (full user objects)\naxios.get(\"http://localhost:8080/api/users/trainer/\".concat(auth.id)).then(res=>setClients(res.data)).catch(err=>console.error(\"Error fetching clients:\",err));// ✅ Load progress photos for mapped clients\naxios.get(\"http://localhost:8080/api/progress/trainer/\".concat(auth.id)).then(res=>setPhotos(res.data)).catch(err=>console.error(\"Error fetching progress photos:\",err));},[auth.id]);// ✅ Filter only USER-role clients\nconst userClients=clients.filter(c=>c.role===\"user\"||c.role===\"USER\");return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Client Progress\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{marginTop:12},children:/*#__PURE__*/_jsxs(\"div\",{className:\"helper\",children:[\"Clients: \",userClients.length?userClients.map(c=>c.name).join(\", \"):\"None\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{marginTop:12},children:[photos.map(p=>{const client=userClients.find(c=>c.id===p.userId);if(!client)return null;// ✅ Skip if not a USER-role client\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[p.url?/*#__PURE__*/_jsx(\"img\",{src:p.url,alt:p.caption,style:{width:\"100%\",borderRadius:8}}):/*#__PURE__*/_jsx(\"div\",{className:\"helper\",children:\"No preview\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:6},children:[/*#__PURE__*/_jsx(\"strong\",{children:client.name}),\" \\u2014 \",p.caption]})]})},p.id);}),!photos.length&&/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:\"No client photos yet.\"})]})]});}export default TrainerProgress;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","TrainerProgress","_ref","auth","photos","setPhotos","clients","setClients","id","get","concat","then","res","data","catch","err","console","error","userClients","filter","c","role","className","children","style","marginTop","length","map","name","join","p","client","find","userId","url","src","alt","caption","width","borderRadius"],"sources":["C:/Users/Gowtham/OneDrive/Desktop/fit-frontend/fitness-app/src/pages/progress/TrainerProgress.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction TrainerProgress({ auth }) {\r\n  const [photos, setPhotos] = useState([]);\r\n  const [clients, setClients] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!auth?.id) return;\r\n\r\n    // ✅ Load mapped clients (full user objects)\r\n    axios.get(`http://localhost:8080/api/users/trainer/${auth.id}`)\r\n      .then(res => setClients(res.data))\r\n      .catch(err => console.error(\"Error fetching clients:\", err));\r\n\r\n    // ✅ Load progress photos for mapped clients\r\n    axios.get(`http://localhost:8080/api/progress/trainer/${auth.id}`)\r\n      .then(res => setPhotos(res.data))\r\n      .catch(err => console.error(\"Error fetching progress photos:\", err));\r\n  }, [auth.id]);\r\n\r\n  // ✅ Filter only USER-role clients\r\n  const userClients = clients.filter(c => c.role === \"user\" || c.role === \"USER\");\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>Client Progress</h2>\r\n\r\n      <div className=\"card\" style={{ marginTop: 12 }}>\r\n        <div className=\"helper\">\r\n          Clients: {userClients.length ? userClients.map(c => c.name).join(\", \") : \"None\"}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row\" style={{ marginTop: 12 }}>\r\n        {photos.map(p => {\r\n          const client = userClients.find(c => c.id === p.userId);\r\n          if (!client) return null; // ✅ Skip if not a USER-role client\r\n\r\n          return (\r\n            <div className=\"col\" key={p.id}>\r\n              <div className=\"card\">\r\n                {p.url ? (\r\n                  <img src={p.url} alt={p.caption} style={{ width: \"100%\", borderRadius: 8 }} />\r\n                ) : (\r\n                  <div className=\"helper\">No preview</div>\r\n                )}\r\n                <div style={{ marginTop: 6 }}>\r\n                  <strong>{client.name}</strong> — {p.caption}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n        {!photos.length && <div className=\"card\">No client photos yet.</div>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TrainerProgress;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}