{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{Card,Stat}from\"../../components/UI\";import{NavLink}from\"react-router-dom\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function TrainerDashboard(_ref){let{auth}=_ref;const[clients,setClients]=useState([]);const[workoutsCount,setWorkoutsCount]=useState(0);const[dietsCount,setDietsCount]=useState(0);const[loading,setLoading]=useState(false);useEffect(()=>{if(!(auth!==null&&auth!==void 0&&auth.id))return;setLoading(true);// ✅ Load full user details for clients mapped to this trainer\naxios.get(\"http://localhost:8080/api/users/trainer/\".concat(auth.id)).then(res=>{console.log(\"Trainer clients response:\",res.data);// debug\nsetClients(res.data);}).catch(err=>console.error(\"Error fetching clients:\",err));// ✅ Count workouts assigned by trainer\naxios.get(\"http://localhost:8080/api/workouts/trainer/\".concat(auth.id)).then(res=>setWorkoutsCount(res.data.length)).catch(err=>console.error(\"Error fetching workouts:\",err));// ✅ Count diets assigned by trainer\naxios.get(\"http://localhost:8080/api/diets/trainer/\".concat(auth.id)).then(res=>setDietsCount(res.data.length)).catch(err=>console.error(\"Error fetching diets:\",err)).finally(()=>setLoading(false));},[auth.id]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",auth.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{marginTop:12},children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(Stat,{label:\"Clients\",value:clients.length})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(Stat,{label:\"Assigned Workouts\",value:workoutsCount})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(Stat,{label:\"Diet Plans\",value:dietsCount})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",style:{marginTop:12},children:/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(Card,{title:\"Quick actions\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,flexWrap:\"wrap\"},children:[/*#__PURE__*/_jsx(NavLink,{to:\"/trainer/workouts\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Create Workouts\"})}),/*#__PURE__*/_jsx(NavLink,{to:\"/trainer/diets\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Create Diet Plans\"})}),/*#__PURE__*/_jsx(NavLink,{to:\"/trainer/progress\",children:/*#__PURE__*/_jsx(\"button\",{children:\"View Progress\"})}),/*#__PURE__*/_jsx(NavLink,{to:\"/trainer/bmi\",children:/*#__PURE__*/_jsx(\"button\",{children:\"View BMI Reports\"})}),/*#__PURE__*/_jsx(NavLink,{to:\"/trainer/profile\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Manage Clients\"})})]})}),/*#__PURE__*/_jsx(Card,{title:\"My clients\",children:loading?/*#__PURE__*/_jsx(\"div\",{style:{padding:12},children:\"Loading clients...\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"list\",children:[clients.map(c=>{var _c$id,_c$name,_c$email,_c$height,_c$weight;return/*#__PURE__*/_jsxs(\"div\",{className:\"list-item\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:(_c$name=c.name)!==null&&_c$name!==void 0?_c$name:\"Unnamed\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"helper\",children:[\" (\",(_c$email=c.email)!==null&&_c$email!==void 0?_c$email:\"No email\",\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"helper\",children:[\"Height \",(_c$height=c.height)!==null&&_c$height!==void 0?_c$height:\"—\",\" cm \\u2022 Weight \",(_c$weight=c.weight)!==null&&_c$weight!==void 0?_c$weight:\"—\",\" kg\"]})]},(_c$id=c.id)!==null&&_c$id!==void 0?_c$id:Math.random());}),!clients.length&&/*#__PURE__*/_jsx(\"div\",{style:{padding:12},children:\"No clients mapped. Use Profile \\u2192 Manage Clients to add.\"})]})})]})})]});}export default TrainerDashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","Card","Stat","NavLink","jsxs","_jsxs","jsx","_jsx","TrainerDashboard","_ref","auth","clients","setClients","workoutsCount","setWorkoutsCount","dietsCount","setDietsCount","loading","setLoading","id","get","concat","then","res","console","log","data","catch","err","error","length","finally","className","children","name","style","marginTop","label","value","title","display","gap","flexWrap","to","padding","map","c","_c$id","_c$name","_c$email","_c$height","_c$weight","email","height","weight","Math","random"],"sources":["C:/Users/Gowtham/OneDrive/Desktop/FITNESS WORK/fitness-app/src/pages/dashboards/TrainerDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Card, Stat } from \"../../components/UI\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nfunction TrainerDashboard({ auth }) {\r\n  const [clients, setClients] = useState([]);\r\n  const [workoutsCount, setWorkoutsCount] = useState(0);\r\n  const [dietsCount, setDietsCount] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!auth?.id) return;\r\n\r\n    setLoading(true);\r\n\r\n    // ✅ Load full user details for clients mapped to this trainer\r\n    axios.get(`http://localhost:8080/api/users/trainer/${auth.id}`)\r\n      .then(res => {\r\n        console.log(\"Trainer clients response:\", res.data); // debug\r\n        setClients(res.data);\r\n      })\r\n      .catch(err => console.error(\"Error fetching clients:\", err));\r\n\r\n    // ✅ Count workouts assigned by trainer\r\n    axios.get(`http://localhost:8080/api/workouts/trainer/${auth.id}`)\r\n      .then(res => setWorkoutsCount(res.data.length))\r\n      .catch(err => console.error(\"Error fetching workouts:\", err));\r\n\r\n    // ✅ Count diets assigned by trainer\r\n    axios.get(`http://localhost:8080/api/diets/trainer/${auth.id}`)\r\n      .then(res => setDietsCount(res.data.length))\r\n      .catch(err => console.error(\"Error fetching diets:\", err))\r\n      .finally(() => setLoading(false));\r\n  }, [auth.id]);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>Welcome, {auth.name}</h2>\r\n\r\n      <div className=\"row\" style={{ marginTop: 12 }}>\r\n        <div className=\"col\"><Stat label=\"Clients\" value={clients.length} /></div>\r\n        <div className=\"col\"><Stat label=\"Assigned Workouts\" value={workoutsCount} /></div>\r\n        <div className=\"col\"><Stat label=\"Diet Plans\" value={dietsCount} /></div>\r\n      </div>\r\n\r\n      <div className=\"row\" style={{ marginTop: 12 }}>\r\n        <div className=\"col\">\r\n          <Card title=\"Quick actions\">\r\n            <div style={{ display: \"flex\", gap: 8, flexWrap: \"wrap\" }}>\r\n              <NavLink to=\"/trainer/workouts\"><button>Create Workouts</button></NavLink>\r\n              <NavLink to=\"/trainer/diets\"><button>Create Diet Plans</button></NavLink>\r\n              <NavLink to=\"/trainer/progress\"><button>View Progress</button></NavLink>\r\n              <NavLink to=\"/trainer/bmi\"><button>View BMI Reports</button></NavLink>\r\n              <NavLink to=\"/trainer/profile\"><button>Manage Clients</button></NavLink>\r\n            </div>\r\n          </Card>\r\n\r\n          <Card title=\"My clients\">\r\n            {loading ? (\r\n              <div style={{ padding: 12 }}>Loading clients...</div>\r\n            ) : (\r\n              <div className=\"list\">\r\n                {clients.map(c => (\r\n                  <div className=\"list-item\" key={c.id ?? Math.random()}>\r\n                    <div>\r\n                      <strong>{c.name ?? \"Unnamed\"}</strong>\r\n                      <span className=\"helper\"> ({c.email ?? \"No email\"})</span>\r\n                    </div>\r\n                    <div className=\"helper\">\r\n                      Height {c.height ?? \"—\"} cm • Weight {c.weight ?? \"—\"} kg\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n                {!clients.length && (\r\n                  <div style={{ padding: 12 }}>\r\n                    No clients mapped. Use Profile → Manage Clients to add.\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TrainerDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}