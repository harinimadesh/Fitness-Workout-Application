{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TrainerWorkouts(_ref){let{auth}=_ref;const[exercise,setExercise]=useState(\"\");const[sets,setSets]=useState(\"\");const[reps,setReps]=useState(\"\");const[duration,setDuration]=useState(\"\");const[assignedUser,setAssignedUser]=useState(\"\");const[clients,setClients]=useState([]);const[userBmi,setUserBmi]=useState(null);useEffect(()=>{if(!(auth!==null&&auth!==void 0&&auth.id))return;// ✅ Load mapped clients and filter to USER role only\naxios.get(\"http://localhost:8080/api/users/trainer/\".concat(auth.id)).then(res=>{const userClients=res.data.filter(c=>c.role===\"user\"||c.role===\"USER\");setClients(userClients);}).catch(err=>console.error(\"Error fetching clients:\",err));},[auth.id]);useEffect(()=>{if(!assignedUser)return setUserBmi(null);// ✅ Fetch latest BMI for selected user\naxios.get(\"http://localhost:8080/api/bmi/user/\".concat(assignedUser)).then(res=>setUserBmi(res.data.length?res.data[res.data.length-1]:null)).catch(err=>console.error(\"Error fetching user BMI:\",err));},[assignedUser]);const handleSubmit=e=>{e.preventDefault();if(!assignedUser)return alert(\"Select a user\");const payload={userId:Number(assignedUser),trainerId:auth.id,exercise,sets:Number(sets),reps:Number(reps),duration:Number(duration)||0,done:false};axios.post(\"http://localhost:8080/api/workouts\",payload).then(()=>{setExercise(\"\");setSets(\"\");setReps(\"\");setDuration(\"\");alert(\"Workout assigned!\");}).catch(err=>{console.error(\"Error assigning workout:\",err);alert(\"Failed to assign workout\");});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create Workout Routine\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{marginTop:12},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Assign to User\"}),/*#__PURE__*/_jsxs(\"select\",{value:assignedUser,onChange:e=>setAssignedUser(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select user\"}),clients.map(c=>/*#__PURE__*/_jsxs(\"option\",{value:c.id,children:[c.name,\" (\",c.email,\")\"]},c.id))]}),userBmi&&/*#__PURE__*/_jsxs(\"div\",{className:\"helper\",style:{marginTop:8},children:[\"Latest BMI: \",userBmi.bmi,\" \\u2022 Height: \",userBmi.height,\" cm \\u2022 Weight: \",userBmi.weight,\" kg\"]}),/*#__PURE__*/_jsx(\"label\",{children:\"Exercise\"}),/*#__PURE__*/_jsx(\"input\",{value:exercise,onChange:e=>setExercise(e.target.value),required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Sets\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:sets,onChange:e=>setSets(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Reps\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:reps,onChange:e=>setReps(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Duration (min)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:duration,onChange:e=>setDuration(e.target.value)})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12},children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Create Workout\"})})]})})]});}export default TrainerWorkouts;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","TrainerWorkouts","_ref","auth","exercise","setExercise","sets","setSets","reps","setReps","duration","setDuration","assignedUser","setAssignedUser","clients","setClients","userBmi","setUserBmi","id","get","concat","then","res","userClients","data","filter","c","role","catch","err","console","error","length","handleSubmit","e","preventDefault","alert","payload","userId","Number","trainerId","done","post","className","children","style","marginTop","onSubmit","value","onChange","target","map","name","email","bmi","height","weight","required","type"],"sources":["C:/Users/Gowtham/OneDrive/Desktop/FITNESS WORK/fitness-app/src/pages/workouts/TrainerWorkouts.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction TrainerWorkouts({ auth }) {\r\n  const [exercise, setExercise] = useState(\"\");\r\n  const [sets, setSets] = useState(\"\");\r\n  const [reps, setReps] = useState(\"\");\r\n  const [duration, setDuration] = useState(\"\");\r\n  const [assignedUser, setAssignedUser] = useState(\"\");\r\n  const [clients, setClients] = useState([]);\r\n  const [userBmi, setUserBmi] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!auth?.id) return;\r\n    // ✅ Load mapped clients and filter to USER role only\r\n    axios.get(`http://localhost:8080/api/users/trainer/${auth.id}`)\r\n      .then(res => {\r\n        const userClients = res.data.filter(c => c.role === \"user\" || c.role === \"USER\");\r\n        setClients(userClients);\r\n      })\r\n      .catch(err => console.error(\"Error fetching clients:\", err));\r\n  }, [auth.id]);\r\n\r\n  useEffect(() => {\r\n    if (!assignedUser) return setUserBmi(null);\r\n    // ✅ Fetch latest BMI for selected user\r\n    axios.get(`http://localhost:8080/api/bmi/user/${assignedUser}`)\r\n      .then(res => setUserBmi(res.data.length ? res.data[res.data.length - 1] : null))\r\n      .catch(err => console.error(\"Error fetching user BMI:\", err));\r\n  }, [assignedUser]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!assignedUser) return alert(\"Select a user\");\r\n\r\n    const payload = {\r\n      userId: Number(assignedUser),\r\n      trainerId: auth.id,\r\n      exercise,\r\n      sets: Number(sets),\r\n      reps: Number(reps),\r\n      duration: Number(duration) || 0,\r\n      done: false,\r\n    };\r\n\r\n    axios.post(\"http://localhost:8080/api/workouts\", payload)\r\n      .then(() => {\r\n        setExercise(\"\"); setSets(\"\"); setReps(\"\"); setDuration(\"\");\r\n        alert(\"Workout assigned!\");\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Error assigning workout:\", err);\r\n        alert(\"Failed to assign workout\");\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>Create Workout Routine</h2>\r\n      <div className=\"card\" style={{ marginTop: 12 }}>\r\n        <form onSubmit={handleSubmit}>\r\n          <label>Assign to User</label>\r\n          <select value={assignedUser} onChange={(e) => setAssignedUser(e.target.value)}>\r\n            <option value=\"\">Select user</option>\r\n            {clients.map(c => (\r\n              <option key={c.id} value={c.id}>\r\n                {c.name} ({c.email})\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          {userBmi && (\r\n            <div className=\"helper\" style={{ marginTop: 8 }}>\r\n              Latest BMI: {userBmi.bmi} • Height: {userBmi.height} cm • Weight: {userBmi.weight} kg\r\n            </div>\r\n          )}\r\n\r\n          <label>Exercise</label>\r\n          <input value={exercise} onChange={(e) => setExercise(e.target.value)} required />\r\n\r\n          <div className=\"row\">\r\n            <div className=\"col\">\r\n              <label>Sets</label>\r\n              <input type=\"number\" value={sets} onChange={(e) => setSets(e.target.value)} required />\r\n            </div>\r\n            <div className=\"col\">\r\n              <label>Reps</label>\r\n              <input type=\"number\" value={reps} onChange={(e) => setReps(e.target.value)} required />\r\n            </div>\r\n            <div className=\"col\">\r\n              <label>Duration (min)</label>\r\n              <input type=\"number\" value={duration} onChange={(e) => setDuration(e.target.value)} />\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ marginTop: 12 }}>\r\n            <button type=\"submit\">Create Workout</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TrainerWorkouts;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}