{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UserProgress(_ref){let{auth}=_ref;const[file,setFile]=useState(null);const[caption,setCaption]=useState(\"\");const[photos,setPhotos]=useState([]);useEffect(()=>{if(!(auth!==null&&auth!==void 0&&auth.id))return;axios.get(\"http://localhost:8080/api/progress/user/\".concat(auth.id)).then(res=>setPhotos(res.data)).catch(err=>console.error(\"Error fetching progress photos:\",err));},[auth.id]);const handleUpload=async e=>{e.preventDefault();if(!file)return alert(\"Select an image\");// ✅ Upload using FormData\nconst formData=new FormData();formData.append(\"file\",file);formData.append(\"caption\",caption);formData.append(\"userId\",auth.id);try{await axios.post(\"http://localhost:8080/api/progress/upload\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});alert(\"Photo uploaded!\");setFile(null);setCaption(\"\");// Refresh list\nconst res=await axios.get(\"http://localhost:8080/api/progress/user/\".concat(auth.id));setPhotos(res.data);}catch(err){console.error(\"Error uploading photo:\",err);alert(\"Upload failed\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Progress\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{marginTop:12},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpload,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Upload Transformation Picture\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:e=>setFile(e.target.files[0]),required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Caption\"}),/*#__PURE__*/_jsx(\"input\",{value:caption,onChange:e=>setCaption(e.target.value),placeholder:\"Week update\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12},children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Upload\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{marginTop:12},children:[photos.map(p=>/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[p.url?/*#__PURE__*/_jsx(\"img\",{src:p.url,alt:p.caption,style:{width:\"100%\",borderRadius:8}}):/*#__PURE__*/_jsx(\"div\",{className:\"helper\",children:\"No preview\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:6},children:/*#__PURE__*/_jsx(\"strong\",{children:p.caption})})]})},p.id)),!photos.length&&/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:\"No photos yet.\"})]})]});}export default UserProgress;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","UserProgress","_ref","auth","file","setFile","caption","setCaption","photos","setPhotos","id","get","concat","then","res","data","catch","err","console","error","handleUpload","e","preventDefault","alert","formData","FormData","append","post","headers","className","children","style","marginTop","onSubmit","type","accept","onChange","target","files","required","value","placeholder","map","p","url","src","alt","width","borderRadius","length"],"sources":["C:/Users/Gowtham/OneDrive/Desktop/FITNESS WORK/fitness-app/src/pages/progress/UserProgress.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction UserProgress({ auth }) {\r\n  const [file, setFile] = useState(null);\r\n  const [caption, setCaption] = useState(\"\");\r\n  const [photos, setPhotos] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!auth?.id) return;\r\n    axios.get(`http://localhost:8080/api/progress/user/${auth.id}`)\r\n      .then(res => setPhotos(res.data))\r\n      .catch(err => console.error(\"Error fetching progress photos:\", err));\r\n  }, [auth.id]);\r\n\r\n  const handleUpload = async (e) => {\r\n    e.preventDefault();\r\n    if (!file) return alert(\"Select an image\");\r\n\r\n    // ✅ Upload using FormData\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    formData.append(\"caption\", caption);\r\n    formData.append(\"userId\", auth.id);\r\n\r\n    try {\r\n      await axios.post(\"http://localhost:8080/api/progress/upload\", formData, {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" }\r\n      });\r\n      alert(\"Photo uploaded!\");\r\n      setFile(null);\r\n      setCaption(\"\");\r\n      // Refresh list\r\n      const res = await axios.get(`http://localhost:8080/api/progress/user/${auth.id}`);\r\n      setPhotos(res.data);\r\n    } catch (err) {\r\n      console.error(\"Error uploading photo:\", err);\r\n      alert(\"Upload failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>My Progress</h2>\r\n      <div className=\"card\" style={{ marginTop: 12 }}>\r\n        <form onSubmit={handleUpload}>\r\n          <label>Upload Transformation Picture</label>\r\n          <input type=\"file\" accept=\"image/*\" onChange={(e) => setFile(e.target.files[0])} required />\r\n          <label>Caption</label>\r\n          <input value={caption} onChange={(e) => setCaption(e.target.value)} placeholder=\"Week update\" />\r\n          <div style={{ marginTop: 12 }}>\r\n            <button type=\"submit\">Upload</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <div className=\"row\" style={{ marginTop: 12 }}>\r\n        {photos.map(p => (\r\n          <div className=\"col\" key={p.id}>\r\n            <div className=\"card\">\r\n              {p.url ? (\r\n                <img src={p.url} alt={p.caption} style={{ width: \"100%\", borderRadius: 8 }} />\r\n              ) : (\r\n                <div className=\"helper\">No preview</div>\r\n              )}\r\n              <div style={{ marginTop: 6 }}><strong>{p.caption}</strong></div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n        {!photos.length && <div className=\"card\">No photos yet.</div>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserProgress;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}